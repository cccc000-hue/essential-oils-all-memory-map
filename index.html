<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¤ç‰©ç§‘å±¬ç²¾æ²¹è¨˜æ†¶å¡</title>
    <style>
        :root {
            /* ä½¿ç”¨æ‚¨æä¾›çš„ç´«è‰²ç³»é¢¨æ ¼ */
            --primary: #6b4c9a;
            --primary-light: #8e72b6;
            --bg: #f9f9f9;
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-sub: #666666;
            --tag-bg: #f3f0f7;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* é ‚éƒ¨å°èˆª */
        header { 
            padding: 15px; 
            background: var(--card-bg); 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
            z-index: 20; 
            flex-shrink: 0;
        }
        h1 { font-size: 1.1rem; font-weight: 700; color: var(--primary); margin: 0; }
        .counter { 
            background: var(--tag-bg); 
            color: var(--primary); 
            padding: 4px 12px; 
            border-radius: 20px; 
            font-size: 0.85rem; 
            font-weight: 600; 
        }

        /* æœå°‹å€ */
        .search-container { 
            padding: 10px 16px; 
            background: var(--bg); 
            z-index: 10; 
            flex-shrink: 0;
        }
        .search-input-wrapper { position: relative; }
        .search-input { 
            width: 100%; 
            padding: 12px 40px 12px 16px; 
            border-radius: 12px; 
            border: 1px solid #ddd; 
            font-size: 1rem; 
            outline: none; 
            background: white;
            transition: border-color 0.2s;
        }
        .search-input:focus { border-color: var(--primary); }
        .clear-btn { 
            position: absolute; 
            right: 0; top: 0; bottom: 0;
            width: 40px; 
            background: none; 
            border: none; 
            font-size: 1.2rem; 
            display: none; 
            color: #999; 
            cursor: pointer;
        }

        /* å¡ç‰‡å€åŸŸ (3D å ´æ™¯) */
        .scene { 
            flex: 1; 
            margin: 10px 16px 16px; 
            perspective: 1000px; 
            position: relative; 
            min-height: 0; 
        }
        
        .card { 
            width: 100%; 
            height: 100%; 
            position: relative; 
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1); 
            transform-style: preserve-3d; 
        }
        .card.is-flipped { transform: rotateY(180deg); }

        .card__face { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            backface-visibility: hidden; 
            -webkit-backface-visibility: hidden; 
            border-radius: 16px; 
            background: var(--card-bg); 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            box-shadow: 0 4px 15px -3px rgba(0, 0, 0, 0.1); 
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* å¡ç‰‡æ­£é¢ */
        .card__face--front { 
            align-items: center; 
            justify-content: center; 
            padding: 32px; 
            text-align: center; 
            transform: rotateY(0deg); 
            z-index: 2; 
            background: linear-gradient(135deg, #ffffff 0%, #fcfaff 100%);
        }
        .icon-circle { 
            width: 100px; 
            height: 100px; 
            background: var(--tag-bg); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin-bottom: 24px; 
            color: var(--primary); 
            font-size: 3rem; 
            box-shadow: 0 4px 12px rgba(107, 76, 154, 0.15);
        }
        .front-cn { font-size: 2.2rem; font-weight: 800; margin-bottom: 10px; color: var(--text-main); }
        .front-en { font-size: 1.2rem; color: var(--text-sub); font-style: italic; font-weight: 500; }
        .tap-hint { 
            margin-top: 40px; 
            font-size: 0.8rem; 
            color: #999; 
            background: #f0f0f0; 
            padding: 8px 20px; 
            border-radius: 20px; 
        }

        /* å¡ç‰‡èƒŒé¢ */
        .card__face--back { transform: rotateY(180deg); }
        
        .back-header { 
            padding: 16px; 
            border-bottom: 1px solid #eee; 
            text-align: center; 
            background: #fff; 
            flex-shrink: 0; 
            border-left: 6px solid var(--primary);
        }
        .back-header h3 { font-size: 1.3rem; margin-bottom: 4px; color: var(--primary); }
        .back-header p { font-size: 1rem; color: var(--text-sub); font-style: italic; }

        .back-content { 
            flex: 1; 
            overflow-y: auto; 
            padding: 20px; 
            -webkit-overflow-scrolling: touch; 
        }
        
        .section { margin-bottom: 24px; }
        .section-title { 
            font-size: 0.9rem; 
            font-weight: 700; 
            color: #444; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            border-bottom: 2px solid var(--tag-bg); 
            padding-bottom: 6px; 
            margin-bottom: 12px;
        }

        /* åˆ—è¡¨æ¨£å¼å„ªåŒ– */
        ul { padding-left: 20px; margin: 0; }
        li { margin-bottom: 8px; font-size: 0.95rem; line-height: 1.5; color: #333; }
        
        /* ç²¾æ²¹æ¨™ç±¤æ¨£å¼ */
        .oil-tag {
            display: inline-block;
            background: #fff;
            border: 1px solid #ddd;
            padding: 4px 10px;
            border-radius: 8px;
            margin-bottom: 6px;
            font-weight: 600;
            color: #2c3e50;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .oil-latin {
            font-weight: 400;
            font-style: italic;
            color: #666;
            font-size: 0.9em;
            margin-left: 4px;
        }

        /* åº•éƒ¨æ§åˆ¶å€ */
        .controls { 
            padding: 0 16px 20px; 
            display: flex; 
            gap: 12px; 
            z-index: 10; 
            flex-shrink: 0;
        }
        .btn { 
            border: none; 
            padding: 16px; 
            border-radius: 16px; 
            font-size: 1rem; 
            font-weight: 600; 
            flex: 1; 
            cursor: pointer; 
            transition: all 0.2s; 
            -webkit-appearance: none; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn:active { transform: scale(0.98); opacity: 0.9; }
        .btn-nav { background: #fff; border: 1px solid #ddd; color: var(--text-sub); }
        .btn-flip { background: var(--primary); color: white; flex: 2; border: 1px solid var(--primary); box-shadow: 0 4px 10px rgba(107, 76, 154, 0.3); }

        /* ç„¡çµæœé¡¯ç¤º */
        .no-results { 
            display: none; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100%; 
            text-align: center; 
            color: var(--text-sub); 
        }
    </style>
</head>
<body>

    <header>
        <h1>æ¤ç‰©ç§‘å±¬ç²¾æ²¹è¨˜æ†¶å¡</h1>
        <div class="counter" id="counter">è¼‰å…¥ä¸­...</div>
    </header>

    <div class="search-container">
        <div class="search-input-wrapper">
            <input type="text" class="search-input" id="searchInput" placeholder="æœå°‹ç§‘å±¬ã€ç²¾æ²¹åç¨±ã€åŠŸæ•ˆ...">
            <button class="clear-btn" id="clearBtn">âœ•</button>
        </div>
    </div>

    <div class="scene">
        <div class="no-results" id="noResults">
            <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ”</div>
            <p>æ‰¾ä¸åˆ°ç›¸é—œç§‘å±¬</p>
        </div>

        <div class="card" id="card">
            <!-- æ­£é¢ -->
            <div class="card__face card__face--front">
                <div class="icon-circle">ğŸŒ±</div>
                <div class="front-cn" id="frontCn"></div>
                <div class="front-en" id="frontEn"></div>
                <div class="tap-hint">é»æ“ŠæŸ¥çœ‹ç²¾æ²¹èˆ‡åŠŸæ•ˆ</div>
            </div>

            <!-- èƒŒé¢ -->
            <div class="card__face card__face--back">
                <div class="back-header">
                    <h3 id="backCn"></h3>
                    <p id="backEn"></p>
                </div>
                <div class="back-content">
                    <div class="section">
                        <div class="section-title">ä»£è¡¨ç²¾æ²¹</div>
                        <div id="valOils"></div>
                    </div>
                    <div class="section">
                        <div class="section-title">ä¸»è¦åŠŸèƒ½</div>
                        <div id="valFuncs"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-nav" id="prevBtn">ä¸Šä¸€å¼µ</button>
        <button class="btn btn-flip" id="flipBtn">æŸ¥çœ‹ç­”æ¡ˆ</button>
        <button class="btn btn-nav" id="nextBtn">ä¸‹ä¸€å¼µ</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è³‡æ–™åº«ï¼šå¾æ‚¨æä¾›çš„ HTML çµæ§‹ä¸­æå–ä¸¦æ•´ç†
            var familyData = [
                {
                    cn: "ç•ªè”æç§‘",
                    latin: "Annonaceae",
                    oils: `<ul><li><span class="oil-tag">ä¾è˜­ä¾è˜­ <span class="oil-latin">(Cananga odorata)</span></span></li></ul>`,
                    func: `<ul><li>å¹³ä¼ (Soothing)</li><li>å¹³è¡¡ (Balancing)</li><li>å¹³éœ (Calming)</li></ul>`
                },
                {
                    cn: "æ©„æ¬–ç§‘",
                    latin: "Burseraceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ä¹³é¦™ <span class="oil-latin">(Boswellia carteri)</span></span></li>
                        <li><span class="oil-tag">å°åº¦ä¹³é¦™ <span class="oil-latin">(Boswellia serrata)</span></span></li>
                        <li><span class="oil-tag">æ¬–é¦™è„‚ <span class="oil-latin">(Canarium luzonicum)</span></span></li>
                        <li><span class="oil-tag">æ²’è—¥ <span class="oil-latin">(Commiphora myrrha)</span></span></li>
                        <li><span class="oil-tag">ç§˜é­¯è–æœ¨ <span class="oil-latin">(Bursera graveolens)</span></span></li>
                    </ul>`,
                    func: `<ul><li>åŒ–ç—°</li><li>ä¿ƒé€²å‚·å£ç™’åˆåŠæ½°ç˜</li><li>æ¸›å°‘ç–¤ç—•çµ„ç¹”</li><li>å…·æœ‰é…¸é¡ï¼Œè¦ªè†šæ€§å¼·</li><li>è­·è†šæŠ—çšº</li><li>ä¿ƒé€²è¡€æ¶²å¾ªç’°ï¼Œæ´»è¡€åŒ–ç˜€</li><li>å¼·æ•ˆæŠ—èŒæ¶ˆç‚</li></ul>`
                },
                {
                    cn: "åŠæ—¥èŠ±ç§‘",
                    latin: "Cistaceae",
                    oils: `<ul><li><span class="oil-tag">å²©ç«ç‘° <span class="oil-latin">(Cistus ladaniferus)</span></span></li></ul>`,
                    func: `<ul><li>ä¿ƒé€²å‚·å£ç™’åˆ</li><li>æ­¢è¡€</li><li>æå‡å…ç–«åŠ›</li><li>æŠ—ç—…æ¯’</li></ul>`
                },
                {
                    cn: "èŠç§‘",
                    latin: "Compositae / Asteraceae",
                    oils: `<ul>
                        <li><span class="oil-tag">å¾·åœ‹æ´‹ç”˜èŠ <span class="oil-latin">(Matricaria chamomilla)</span></span></li>
                        <li><span class="oil-tag">ç¾…é¦¬æ´‹ç”˜èŠ <span class="oil-latin">(Anthemis nobilis)</span></span></li>
                        <li><span class="oil-tag">æ°¸ä¹…èŠ± <span class="oil-latin">(Helichrysum italicum)</span></span></li>
                        <li><span class="oil-tag">è¬å£½èŠ <span class="oil-latin">(Tagetes minuta)</span></span></li>
                        <li><span class="oil-tag">è“è‰ <span class="oil-latin">(Achillea millefolium)</span></span></li>
                        <li><span class="oil-tag">é¾è‰¾ <span class="oil-latin">(Artemisia dracunculus)</span></span></li>
                        <li><span class="oil-tag">è‰¾è‰ <span class="oil-latin">(Artemisia vulgaris)</span></span></li>
                        <li><span class="oil-tag">æ‘©æ´›å“¥è—è‰¾èŠ <span class="oil-latin">(Tanacetum annuum)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æ®ºèŒã€å¹³éœ</li><li>æŠ—éæ•æ€§ã€æŠ—çœŸèŒã€æŠ—æ„ŸæŸ“</li><li>æ¶ˆåŒ–ä¸è‰¯</li><li>ç™¼ç‚</li><li>å¤±çœ ã€å£“åŠ›</li><li>*æŸäº›å…·é…®é¡è¦å°å¿ƒç”¨é‡</li></ul>`
                },
                {
                    cn: "æŸç§‘",
                    latin: "Cupressaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">çµ²æŸ <span class="oil-latin">(Cupressus sempervirens)</span></span></li>
                        <li><span class="oil-tag">æœæ¾ <span class="oil-latin">(Juniperus communis)</span></span></li>
                        <li><span class="oil-tag">ç¶­å‰å°¼äºé›ªæ¾ <span class="oil-latin">(Juniperus virginiana)</span></span></li>
                        <li><span class="oil-tag">è—çµ²æŸ <span class="oil-latin">(Callitris intratropica)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æŠ—èŒã€æŠ—æ„ŸæŸ“ã€æ®ºèŒ</li><li>é»æ¶²æº¶è§£ã€å‘¼å¸ç³»çµ±æ¶ˆæ¯’</li><li>æ¶ˆé™¤æ°´è…«ã€æ’æ¯’</li><li>ä¿ƒé€²å¾ªç’°ï¼Œæœ‰åŠ©è…è‡Ÿæ·¨åŒ–</li><li>*ä½†ç”¨é‡éé«˜æ˜¯æœƒåˆºæ¿€è…è‡Ÿ</li><li>å…·æœ‰æ”¶æ–‚ç‰¹æ€§ï¼Œå¯ä»¥æ”¶ç·Šæ¯›å­”</li></ul>`
                },
                {
                    cn: "ç‰»ç‰›å…’è‹—ç§‘",
                    latin: "Geraniaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">å¤©ç«ºè‘µ <span class="oil-latin">(Pelargonium graveolens)</span></span></li>
                        <li><span class="oil-tag">ç«ç‘°å¤©ç«ºè‘µ <span class="oil-latin">(Pelargonium roseum)</span></span></li>
                        <li><span class="oil-tag">å¤§æ ¹è€é¸›è‰ <span class="oil-latin">(Geranium macrorrhizum)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æŠ—ç´…è…«ç™¼ç‚</li><li>æ®ºèŒ</li><li>æŠ—æ¯’ç´ </li><li>æ»‹è£œç¥ç¶“</li><li>å¹³ä¼</li><li>æ´—æ·¨åŠå†·å»çš®è†š</li></ul>`
                },
                {
                    cn: "å”‡å½¢ç§‘",
                    latin: "Labiatae / Lamiaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ç¾…å‹’ <span class="oil-latin">(Ocimum basilicum)</span></span></li>
                        <li><span class="oil-tag">å¿«æ¨‚é¼ å°¾è‰ <span class="oil-latin">(Salvia sclarea)</span></span></li>
                        <li><span class="oil-tag">è–°è¡£è‰ <span class="oil-latin">(Lavandula angustifolia)</span></span></li>
                        <li><span class="oil-tag">é¦™èœ‚è‰ <span class="oil-latin">(Melissa officinalis)</span></span></li>
                        <li><span class="oil-tag">èƒ¡æ¤’è–„è· <span class="oil-latin">(Mentha x piperita)</span></span></li>
                        <li><span class="oil-tag">è¿·è¿­é¦™ <span class="oil-latin">(Salvia rosmarinus)</span></span></li>
                        <li><span class="oil-tag">ç™¾é‡Œé¦™ <span class="oil-latin">(Thymus vulgaris)</span></span></li>
                        <li><span class="oil-tag">å»£è—¿é¦™ <span class="oil-latin">(Pogostemon cablin)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æ®ºèŒã€æ­¢ç—›</li><li>æŠ—ç´…è…«ç™¼ç‚</li><li>æ²»ç—™æ”£</li><li>é€šç¶“</li><li>ä¿ƒé€²æ’æ±—</li><li>å‘¼å¸ç³»çµ±</li><li>é˜²ç—…æ¯’</li><li>å¹³è¡¡ã€èŠ³é¦™</li></ul>`
                },
                {
                    cn: "æ¨Ÿç§‘",
                    latin: "Lauraceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ç¾…æ–‡èè‘‰ <span class="oil-latin">(Ravensara aromatica)</span></span></li>
                        <li><span class="oil-tag">æ¨Ÿè…¦ <span class="oil-latin">(Cinnamomum camphora)</span></span></li>
                        <li><span class="oil-tag">æœˆæ¡‚ <span class="oil-latin">(Laurus nobilis)</span></span></li>
                        <li><span class="oil-tag">è‚‰æ¡‚è‘‰ <span class="oil-latin">(Cinnamomum zeylanicum)</span></span></li>
                        <li><span class="oil-tag">èŠ±æ¢¨æœ¨ <span class="oil-latin">(Aniba rosaeodora)</span></span></li>
                        <li><span class="oil-tag">èŠ³æ¨Ÿ <span class="oil-latin">(Cinnamomum camphora ct linalool)</span></span></li>
                        <li><span class="oil-tag">å±±é›æ¤’ <span class="oil-latin">(Litsea cubeba)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æŠ—çœŸèŒ</li><li>æ®ºèŒæ•ˆåŠ›å¼·å‹ï¼Œå¿«é€Ÿè¦‹æ•ˆ</li><li>æŠ—ç—…æ¯’</li><li>æå‡å…ç–«åŠ›</li></ul>`
                },
                {
                    cn: "è‚‰è±†è”»ç§‘",
                    latin: "Myristicaceae",
                    oils: `<ul><li><span class="oil-tag">è‚‰è±†è”» <span class="oil-latin">(Myristica fragrans)</span></span></li></ul>`,
                    func: `<ul><li>æ­¢ç—›</li><li>å¹«åŠ©æ¸›è¼•è‚Œè‚‰ç–¼ç—›åŠç—›æ¥š</li><li>å¼·åŠ›å¤§è…¦åˆºæ¿€åŠ‘</li></ul>`
                },
                {
                    cn: "æ¡ƒé‡‘å­ƒç§‘",
                    latin: "Myrtaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ä¸é¦™ <span class="oil-latin">(Eugenia caryophyllata)</span></span></li>
                        <li><span class="oil-tag">å°¤åŠ åˆ© <span class="oil-latin">(Eucalyptus globulus/radiata)</span></span></li>
                        <li><span class="oil-tag">ç¶ èŠ±ç™½åƒå±¤ <span class="oil-latin">(Melaleuca viridiflora)</span></span></li>
                        <li><span class="oil-tag">èŒ¶æ¨¹ <span class="oil-latin">(Melaleuca alternifolia)</span></span></li>
                        <li><span class="oil-tag">æ¾ç´…æ¢… <span class="oil-latin">(Leptospermum scoparium)</span></span></li>
                    </ul>`,
                    func: `<ul><li>é«˜åº¦æ®ºèŒã€æŠ—ç—…æ¯’</li><li>æ»‹è£œåŠåˆºæ¿€æ¿€å‹µ</li><li>å‘¼å¸ç³»çµ±ã€é»æ¶²æº¶è§£</li><li>æœ‰åŠ©æ”¯æ°£ç®¡æ“´å¼µ</li><li>*å«é«˜é‡æ°§åŒ–ç‰©åŠé†›é¡ï¼Œå¯èƒ½å¼•èµ·çš®è†šåˆºæ¿€</li><li>é©ç”¨æ–¼è‚Œè‚‰åŠé—œç¯€ç—›ç—‡</li></ul>`
                },
                {
                    cn: "æœ¨çŠ€ç§‘",
                    latin: "Oleaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">èŒ‰è‰ <span class="oil-latin">(Jasminum sambac)</span></span></li>
                        <li><span class="oil-tag">æ¡‚èŠ± <span class="oil-latin">(Osmanthus fragrans)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æŠ—æ†‚é¬±</li><li>æŠ—ç´…è…«ç™¼ç‚</li><li>é©…é¢¨</li><li>é®éœ</li></ul>`
                },
                {
                    cn: "æ¾ç§‘",
                    latin: "Pinaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">å¤§è¥¿æ´‹é›ªæ¾ <span class="oil-latin">(Cedrus atlantica)</span></span></li>
                        <li><span class="oil-tag">æ­æ´²èµ¤æ¾ <span class="oil-latin">(Pinus sylvestris)</span></span></li>
                        <li><span class="oil-tag">è† å†·æ‰ <span class="oil-latin">(Abies balsamea)</span></span></li>
                        <li><span class="oil-tag">é»‘é›²æ‰ <span class="oil-latin">(Picea mariana)</span></span></li>
                    </ul>`,
                    func: `<ul><li>é«˜åº¦æ®ºèŒ</li><li>é»è†œç‚</li><li>æå‡è…ä¸Šè…ºç´ </li><li>ç·©å’Œå‘¼å¸é“ç™¼ç‚</li><li>è™•ç†é—œç¯€ç‚</li></ul>`
                },
                {
                    cn: "èƒ¡æ¤’ç§‘",
                    latin: "Piperaceae",
                    oils: `<ul><li><span class="oil-tag">é»‘èƒ¡æ¤’ <span class="oil-latin">(Piper nigrum)</span></span></li></ul>`,
                    func: `<ul><li>æŠ—é»è†œç‚</li><li>å¾ªç’°ç³»çµ±åŠæ¶ˆåŒ–ç³»çµ±çš„åˆºæ¿€åŠ‘</li><li>æ­¢ç—›</li><li>åŒ–ç—°</li></ul>`
                },
                {
                    cn: "ç¦¾æœ¬ç§‘",
                    latin: "Poaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">é¦™èŒ… <span class="oil-latin">(Cymbopogon nardus)</span></span></li>
                        <li><span class="oil-tag">æª¸æª¬é¦™èŒ… <span class="oil-latin">(Cymbopogon citratus)</span></span></li>
                        <li><span class="oil-tag">ç«ç‘°è‰ <span class="oil-latin">(Cymbopogon martini)</span></span></li>
                        <li><span class="oil-tag">å²©è˜­è‰ <span class="oil-latin">(Vetiveria zizanioides)</span></span></li>
                    </ul>`,
                    func: `<ul><li>ç—¤ç˜¡</li><li>ç–¼ç—›åŠç—›æ¥š</li><li>ä¿ƒé€²è¡€æ¶²å¾ªç’°</li><li>å¾ªç’°ç³»çµ±çš„åˆºæ¿€åŠ‘</li></ul>`
                },
                {
                    cn: "è–”è–‡ç§‘",
                    latin: "Rosaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">å¤§é¦¬å£«é©ç«ç‘° <span class="oil-latin">(Rosa damascena)</span></span></li>
                        <li><span class="oil-tag">ç™½ç«ç‘° <span class="oil-latin">(Rosa alba)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æ®ºèŒã€æŠ—ç—…æ¯’</li><li>æŠ—ç´…è…«ç™¼ç‚ã€æŠ—çœŸèŒ</li><li>å¹³è¡¡è·çˆ¾è’™</li><li>å°çš®è†šæœ‰ç›Š</li></ul>`
                },
                {
                    cn: "èŠ¸é¦™ç§‘",
                    latin: "Rutaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ä½›æ‰‹æŸ‘ <span class="oil-latin">(Citrus bergamia)</span></span></li>
                        <li><span class="oil-tag">è‘¡è„æŸš <span class="oil-latin">(Citrus paradisi)</span></span></li>
                        <li><span class="oil-tag">æª¸æª¬ <span class="oil-latin">(Citrus limonum)</span></span></li>
                        <li><span class="oil-tag">ç”œæ©™ <span class="oil-latin">(Citrus sinensis)</span></span></li>
                        <li><span class="oil-tag">æ©™èŠ± <span class="oil-latin">(Citrus aurantium)</span></span></li>
                        <li><span class="oil-tag">å¤é¾è‘‰ <span class="oil-latin">(Petitgrain)</span></span></li>
                    </ul>`,
                    func: `<ul><li>å°æ¶ˆåŒ–ç³»çµ±æœ‰å¹³è¡¡åŠåˆºæ¿€ä½œç”¨</li><li>æ®ºèŒ</li><li>é®éœç¥ç¶“</li><li>ç²¾ç¥å¤§æŒ¯</li><li>æŠ—ç—…æ¯’</li></ul>`
                },
                {
                    cn: "æª€é¦™ç§‘",
                    latin: "Santalaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">æª€é¦™ <span class="oil-latin">(Santalum album)</span></span></li>
                        <li><span class="oil-tag">æ¾³æ´²æª€é¦™ <span class="oil-latin">(Santalum spicatum)</span></span></li>
                    </ul>`,
                    func: `<ul><li>å¹³è¡¡ç¥ç¶“ç³»çµ±</li><li>å‘¼å¸ç³»çµ±åŠæ’æ³„ç³»çµ±</li><li>ä¹¾ç‡¥çš®è†š</li><li>èª¿ç¯€è³€çˆ¾è’™</li></ul>`
                },
                {
                    cn: "å®‰æ¯é¦™ç§‘",
                    latin: "Styracaceae",
                    oils: `<ul><li><span class="oil-tag">å®‰æ¯é¦™ <span class="oil-latin">(Styrax benzoin)</span></span></li></ul>`,
                    func: `<ul><li>æŠ—é»è†œç‚</li><li>åŒ–ç—°</li><li>çš®è†šæ²»ç™‚</li><li>é—œç¯€ç—›æ¥š</li><li>å¾ªç’°ä¸ä½³</li></ul>`
                },
                {
                    cn: "ç¹–å½¢ç§‘",
                    latin: "Umbelliferae / Apiaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">æ­ç™½èŠ· <span class="oil-latin">(Angelica archangelica)</span></span></li>
                        <li><span class="oil-tag">èƒ¡è˜¿è””ç±½ <span class="oil-latin">(Daucus carota)</span></span></li>
                        <li><span class="oil-tag">ç”œèŒ´é¦™ <span class="oil-latin">(Foeniculum vulgare)</span></span></li>
                        <li><span class="oil-tag">èŠ¹èœç±½ <span class="oil-latin">(Apium graveolens)</span></span></li>
                    </ul>`,
                    func: `<ul><li>å¹«åŠ©æ¶ˆåŒ–ã€åˆ†è§£è„‚è‚ª</li><li>åˆºæ¿€è†½æ±æµå‹•ã€æš–èº«</li><li>é©…é¢¨ã€æŠ—ç´°èŒã€æ®ºèŒ</li><li>æ²»ç—™æ”£ã€æŠ—ç´…è…«ç™¼ç‚</li><li>é€šç¶“ã€æ»‹è£œåŠ‘</li></ul>`
                },
                {
                    cn: "æ•—é†¬è‰ç§‘",
                    latin: "Valerianaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">ç©—ç”˜æ¾ <span class="oil-latin">(Nardostachys jatamansi)</span></span></li>
                        <li><span class="oil-tag">çºˆè‰ <span class="oil-latin">(Valeriana officinalis)</span></span></li>
                    </ul>`,
                    func: `<ul><li>å°ç¥ç¶“ç³»çµ±æœ‰å®‰ç¥ä½œç”¨</li><li>æ²»ç™‚ç¥ç¶“ç—›ç—‡</li></ul>`
                },
                {
                    cn: "è–‘ç§‘",
                    latin: "Zingiberaceae",
                    oils: `<ul>
                        <li><span class="oil-tag">å°è³è”» <span class="oil-latin">(Elettaria cardamomum)</span></span></li>
                        <li><span class="oil-tag">è–‘ <span class="oil-latin">(Zingiber officinale)</span></span></li>
                    </ul>`,
                    func: `<ul><li>æ¶ˆåŒ–ç³»çµ±æ»‹è£œåŠ‘</li><li>æŠ—é»è†œç‚</li><li>å°è‚Œè‚‰ç³»çµ±æœ‰å’Œæš–ä½œç”¨</li><li>æ­¢ç—›ï¼Œå°¤å…¶æ˜¯ç‰™ç—›</li></ul>`
                }
            ];

            // --- è®Šæ•¸ ---
            var currentIndex = 0;
            var isFlipped = false;
            var filteredData = familyData.slice();

            // --- å…ƒç´  ---
            var card = document.getElementById('card');
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');
            var flipBtn = document.getElementById('flipBtn');
            var searchInput = document.getElementById('searchInput');
            var clearBtn = document.getElementById('clearBtn');
            var counter = document.getElementById('counter');
            var noResults = document.getElementById('noResults');

            // --- æ ¸å¿ƒåŠŸèƒ½ ---
            function renderCard() {
                if (filteredData.length === 0) {
                    card.style.display = 'none';
                    noResults.style.display = 'flex';
                    counter.innerText = "0 / 0";
                    return;
                }

                card.style.display = 'block';
                noResults.style.display = 'none';
                
                var data = filteredData[currentIndex];
                counter.innerText = (currentIndex + 1) + " / " + filteredData.length;

                // å¡«å……æ­£é¢
                document.getElementById('frontCn').innerText = data.cn;
                document.getElementById('frontEn').innerText = data.latin;

                // å¡«å……èƒŒé¢
                document.getElementById('backCn').innerText = data.cn;
                document.getElementById('backEn').innerText = data.latin;
                document.getElementById('valOils').innerHTML = data.oils;
                document.getElementById('valFuncs').innerHTML = data.func;

                // é‡ç½®ç¿»è½‰ç‹€æ…‹
                if (isFlipped) {
                    card.classList.remove('is-flipped');
                    isFlipped = false;
                    flipBtn.innerText = "æŸ¥çœ‹ç­”æ¡ˆ";
                    flipBtn.style.background = "var(--primary)";
                    flipBtn.style.color = "white";
                }
            }

            function handleFlip() {
                if (filteredData.length === 0) return;
                isFlipped = !isFlipped;
                if (isFlipped) {
                    card.classList.add('is-flipped');
                    flipBtn.innerText = "è¿”å›";
                    flipBtn.style.background = "#fff";
                    flipBtn.style.color = "#333";
                } else {
                    card.classList.remove('is-flipped');
                    flipBtn.innerText = "æŸ¥çœ‹ç­”æ¡ˆ";
                    flipBtn.style.background = "var(--primary)";
                    flipBtn.style.color = "white";
                }
            }

            function handleNext() {
                currentIndex++;
                if (currentIndex >= filteredData.length) currentIndex = 0;
                resetAndRender();
            }

            function handlePrev() {
                currentIndex--;
                if (currentIndex < 0) currentIndex = filteredData.length - 1;
                resetAndRender();
            }

            function resetAndRender() {
                if(isFlipped) {
                    card.classList.remove('is-flipped');
                    isFlipped = false;
                    flipBtn.innerText = "æŸ¥çœ‹ç­”æ¡ˆ";
                    flipBtn.style.background = "var(--primary)";
                    flipBtn.style.color = "white";
                    setTimeout(function(){ renderCard(); }, 200);
                } else {
                    renderCard();
                }
            }

            function handleSearch() {
                var query = searchInput.value.toLowerCase().trim();
                if (query.length > 0) {
                    clearBtn.style.display = 'block';
                    filteredData = [];
                    for (var i = 0; i < familyData.length; i++) {
                        var item = familyData[i];
                        // æœå°‹ç¯„åœï¼šä¸­æ–‡ç§‘å±¬ã€æ‹‰ä¸ç§‘å±¬ã€ç²¾æ²¹å…§å®¹(å«HTMLæ¨™ç±¤å…§çš„æ–‡å­—)ã€åŠŸæ•ˆ
                        if (
                            (item.cn && item.cn.indexOf(query) > -1) ||
                            (item.latin && item.latin.toLowerCase().indexOf(query) > -1) ||
                            (item.oils && item.oils.toLowerCase().indexOf(query) > -1) ||
                            (item.func && item.func.toLowerCase().indexOf(query) > -1)
                        ) {
                            filteredData.push(item);
                        }
                    }
                } else {
                    clearBtn.style.display = 'none';
                    filteredData = familyData.slice();
                }
                currentIndex = 0;
                renderCard();
            }

            function clearSearch() {
                searchInput.value = '';
                handleSearch();
            }

            // --- ç¶å®šäº‹ä»¶ ---
            if (card) card.onclick = handleFlip;
            if (flipBtn) flipBtn.onclick = handleFlip;
            if (nextBtn) nextBtn.onclick = handleNext;
            if (prevBtn) prevBtn.onclick = handlePrev;
            if (searchInput) searchInput.oninput = handleSearch;
            if (clearBtn) clearBtn.onclick = clearSearch;

            // --- å•Ÿå‹• ---
            renderCard();
        });
    </script>
</body>
</html>
